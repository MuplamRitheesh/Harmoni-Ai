<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Harmoni AI - Dashboard</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
body { background: linear-gradient(135deg,#1e1f29,#2d1f46); min-height:100vh; display:flex; justify-content:center; align-items:center; padding:20px; }
.form-container { background:#2c2f48; padding:30px; border-radius:12px; box-shadow:0 8px 25px rgba(0,0,0,0.4); width:100%; max-width:600px; color:#fff; }
h2 { text-align:center; margin-bottom:20px; color:#ff5b5b; }
#dashboardData { background:#3c3f61; padding:15px; border-radius:8px; font-size:0.95rem; line-height:1.5; max-height:70vh; overflow-y:auto; }
button.logout-btn { margin-top:15px; width:100%; padding:12px; background:#ff5b5b; border:none; border-radius:8px; color:white; font-size:1rem; cursor:pointer; transition:0.3s; }
button.logout-btn:hover { background:#e14c4c; }
</style>
</head>
<body>
<div class="form-container">
<h2>Dashboard</h2>
<div id="dashboardData"></div>
<button class="logout-btn" id="logoutBtn">Logout</button>
</div>

<script>
const dashboardData = document.getElementById("dashboardData");
const currentUserEmail = localStorage.getItem("currentUser");

if(!currentUserEmail){
  alert("No user logged in! Redirecting to login page...");
  window.location.href = "login.html";
}else{
  const userData = JSON.parse(localStorage.getItem(currentUserEmail));
  if(!userData){ alert("User data not found! Redirecting..."); window.location.href="login.html"; }
  else{
    let html = `<strong>Name:</strong> ${userData.name}<br>
                <strong>Email:</strong> ${userData.email}<br><br>
                <strong>Survey Responses:</strong><br>`;
    if(userData.survey){
      html += Object.entries(userData.survey)
              .map(([q,ans]) => `${q}: ${ans}`)
              .join("<br>");
    }else{
      html += "No survey submitted yet.";
    }
    dashboardData.innerHTML = html;
  }
}

// Logout
document.getElementById("logoutBtn").addEventListener("click", ()=>{
  localStorage.removeItem("currentUser");
  alert("Logged out successfully!");
  window.location.href = "login.html";
});
</script>
</body>
</html>